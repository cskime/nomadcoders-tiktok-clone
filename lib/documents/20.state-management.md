# State Management

## Router migration

- Web에서 주소가 달라져야 하는 부분은 `go_router` package 사용 (v2)
  - `GoRouter` 아래 `GoRoute`에서 이동할 screen 정의
  - `BuildContext`에 추가된 `push`, `pop`을 사용해서 화면 전환
- URL을 바꾸지 않고 route만 이동할 때는 `Navigator` 사용 (v1)
- 예시
  - `MainNavigationScreen` -> `VideoRecordingScreen` : `go_router` 사용
    - URL이 `/home`에서 `/upload`로 바뀌는 것
  - `VideoRecordingScreen` -> `VideoPreviewScreen` : `Navigator` 사용
    - URL은 `/upload`로 변경되지 않고 preview screen으로 이동하는 것

## GoRoute

- URL parameter에 들어올 수 있는 값 제한
  - `/:tab(a|b|c|d)` : 네 개의 값들만 매칭될 수 있음
  - `/e`는 매칭되지 않음
- URL parameter에 들어갈 값을 `BuildContext.pushNamed`에서 `params`에 `Map<String, String>` 값으로 전달할 수도 있다.
  - Web browser에서는 URL로부터 파싱할 수 있음
  - 코드에서 URL parameter에 값을 전달하며 route로 이동할 때는 `params` 사용

## InheritedWidget

- Widget tree에서 위치에 상관 없이 하위 widget들이 바로 접근할 수 있는 widget
- 사용 방법
  - `InheritedWidget`을 상속받는 widget 구현
  - Widget tree 상위에 `InheritedWidget` 추가
  - `InheritedWidget`에 접근하려는 하위 widget에서 `BuildContext.dependOnInheritedWidgetOfExactType<T>` method를 사용해서 `InheritedWidget` 참조
    - Widget tree의 조상 widget들 중 찾으려는 `InheritedWidget`이 없다면 `null` 반환
- `dependOnInheritedWidgetOfExactType<T>`이란 이름은 너무 길기 때문에 일반적으로 `of()` static method를 만들어서 사용하는 편

### updateShouldNotify

- Widget을 rebuild 할지 결정
- `InheritedWidget`을 rebuild할 때 호출됨
- `oldWidget`을 사용해서 이 `InheritedWidget`을 참조하는 하위 widget들도 rebuild 해야할지 결정할 수 있다.
